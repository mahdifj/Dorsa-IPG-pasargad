<div dir="rtl" align="right">

## مراحل کلی یک تراکنش به ترتیب

۱. ورود مشتری به سایت پذیرنده و تشکیل سبد خرید یا انتخاب خدمات مورد نظر.  

۲. فراخوانی متد `getToken` و دریافت توکن توسط پذیرنده.  

۳. هدایت مشتری به درگاه پرداخت الکترونیک پاسارگاد به همراه توکن دریافتی از طریق وب سرویس موردنظر (خرید، شارژ/قبض، خرید شناسه‌دار و ...). در این مرحله ارسال اطلاعات `Referer` الزامی می‌باشد.  

۴. تکمیل اطلاعات کارت توسط مشتری و انجام مرحله پرداخت وجه.  

۵. هدایت مشتری به سایت پذیرنده (`redirect`) پس از انجام عملیات پرداخت توسط مشتری. (وضعیت تراکنش در اطلاعات `callback` به پذیرنده اعلام می‌گردد و در صورت نیاز می‌تواند این فرآیند با استعلام وضعیت تراکنش جایگزین گردد. تشخیص این مهم با مسئولیت تیم توسعه پذیرنده می‌باشد.)  

۶. ادامه روند عملیات خرید مشتری در سایت پذیرنده پس از دریافت نتیجه تراکنش از طریق فراخوانی متد `payment-inquiry`. 

۷. نهایی کردن تراکنش پس از ارائه خدمات به خریدار. در صورتی که پذیرنده با استفاده از متد `verify-transactions` تراکنش خرید را نهایی نکند، تراکنش به حساب مشتری عودت پیدا خواهد کرد. حداکثر زمان فراخوانی متد فوق بر حسب مقدار اعلامی توسط مشتری می‌باشد (پیش‌فرض ۲۵ دقیقه).

۸. پس از نهایی کردن تراکنش، در صورتی که پذیرنده قصد ابطال تراکنش را داشته باشد، می‌تواند حداکثر تا زمان اعلامی توسط مشتری (پیش‌فرض ۲۵ دقیقه) بعد از انجام تراکنش، به وسیله متد `reverse-transactions` اقدام به برگشت خرید نماید. این زمان نیز طبق درخواست مشتری می‌تواند کمتر و یا صفر شود. بدیهی است در صورت صفر شدن این مقدار، امکان `reverse` تراکنش وجود نخواهد داشت. لازم به ذکر است جهت انجام تراکنش `reverse` نیاز به ارسال `verify` نمی‌باشد.

۹. درصورتی که پذیرنده تمایل داشته باشد تراکنش را در همان لحظه انجام، تأیید نهایی نماید به گونه‌ای که امکان ابطال آن وجود نداشته باشد، می‌تواند متد `confirm-transactions` را فراخوانی نماید.  

</div>
